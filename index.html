<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Backtesting Tracker</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <style>
    body {
      padding: 1rem;
      background-color: #f8f9fa;
    }
    .dashboard-card {
      border-radius: 1rem;
      box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.1);
      padding: 1rem;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h4 class="mb-3">ðŸ“Š Backtesting Tracker</h4>
    <div id="auth-section" class="mb-3">
      <button class="btn btn-primary" onclick="signInWithGoogle()">Sign in with Google</button>
      <button class="btn btn-danger" onclick="signOutUser()">Sign Out</button>
      <p id="user-info" class="mt-2"></p>
    </div><form id="trade-form" class="mb-4">
  <div class="row g-2">
    <div class="col-md-6">
      <label>Pair</label>
      <select class="form-select" id="pair">
        <option>EURUSD</option>
        <option>EURCAD</option>
        <option>GBPUSD</option>
        <option>US30</option>
        <option>BTCUSD</option>
      </select>
    </div>
    <div class="col-md-6">
      <label>Date & Time</label>
      <input type="datetime-local" class="form-control" id="datetime" />
    </div>
    <div class="col-md-6">
      <label>H4 Direction</label>
      <select class="form-select" id="h4-dir"><option>Buy</option><option>Sell</option></select>
    </div>
    <div class="col-md-6">
      <label>H1 Direction</label>
      <select class="form-select" id="h1-dir"><option>Buy</option><option>Sell</option></select>
    </div>
    <div class="col-md-6">
      <label>Zone Type</label>
      <select class="form-select" id="zone-type"><option>Supply</option><option>Demand</option></select>
    </div>
    <div class="col-md-6">
      <label>Entry Price</label>
      <input type="number" class="form-control" id="entry" />
    </div>
    <div class="col-md-6">
      <label>Stop Loss</label>
      <input type="number" class="form-control" id="sl" />
    </div>
    <div class="col-md-6">
      <label>Take Profit</label>
      <input type="number" class="form-control" id="tp" />
    </div>
    <div class="col-md-6">
      <label>SL Size (pips)</label>
      <input type="number" class="form-control" id="sl-size" />
    </div>
    <div class="col-md-6">
      <label>Risk to Reward</label>
      <input type="text" class="form-control" id="rr" />
    </div>
    <div class="col-md-6">
      <label>Result</label>
      <select class="form-select" id="result">
        <option>Win</option>
        <option>Loss</option>
        <option>BE</option>
      </select>
    </div>
    <div class="col-md-12">
      <label>Notes</label>
      <textarea class="form-control" id="notes"></textarea>
    </div>
  </div>
  <button type="submit" class="btn btn-success mt-3">Save Trade</button>
</form>

<div class="d-flex gap-2">
  <button class="btn btn-outline-primary" onclick="exportCSV()">ðŸ“¤ Export CSV</button>
  <input type="file" id="importFile" class="form-control w-50" accept=".csv" />
  <button class="btn btn-outline-secondary" onclick="importCSV()">ðŸ“¥ Import CSV</button>
</div>

<hr />

<div class="dashboard-card">
  <h5>ðŸ“ˆ Dashboard Summary</h5>
  <p>Coming next: per-pair & monthly analytics</p>
</div>

  </div>  <script>
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "SENDER_ID",
      appId: "APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    let currentUser = null;

    function signInWithGoogle() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider).then(result => {
        currentUser = result.user;
        document.getElementById("user-info").innerText = `Logged in as ${currentUser.displayName}`;
      });
    }

    function signOutUser() {
      auth.signOut().then(() => {
        currentUser = null;
        document.getElementById("user-info").innerText = '';
        alert("Signed out");
      });
    }

    document.getElementById("trade-form").addEventListener("submit", async function (e) {
      e.preventDefault();
      const trade = {
        pair: pair.value,
        datetime: datetime.value,
        h4: h4-dir.value,
        h1: h1-dir.value,
        zone: zone-type.value,
        entry: entry.value,
        sl: sl.value,
        tp: tp.value,
        slSize: sl-size.value,
        rr: rr.value,
        result: result.value,
        notes: notes.value,
      };
      const trades = JSON.parse(localStorage.getItem("trades") || "[]");
      trades.push(trade);
      localStorage.setItem("trades", JSON.stringify(trades));
      if (currentUser) await db.collection("users").doc(currentUser.uid).collection("trades").add(trade);
      alert("Trade saved");
      this.reset();
    });

    function exportCSV() {
      const trades = JSON.parse(localStorage.getItem("trades") || "[]");
      let csv = "Pair,Datetime,H4,H1,Zone,Entry,SL,TP,SL Size,RR,Result,Notes\n";
      trades.forEach(t => {
        csv += `${t.pair},${t.datetime},${t.h4},${t.h1},${t.zone},${t.entry},${t.sl},${t.tp},${t.slSize},${t.rr},${t.result},"${t.notes.replace(/\n/g, ' ')}"\n`;
      });
      const blob = new Blob([csv], { type: "text/csv" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "trades.csv";
      a.click();
    }

    function importCSV() {
      const file = document.getElementById("importFile").files[0];
      const reader = new FileReader();
      reader.onload = function (e) {
        const lines = e.target.result.split("\n");
        const imported = lines.slice(1).filter(Boolean).map(line => {
          const [pair, datetime, h4, h1, zone, entry, sl, tp, slSize, rr, result, notes] = line.split(",");
          return { pair, datetime, h4, h1, zone, entry, sl, tp, slSize, rr, result, notes };
        });
        localStorage.setItem("trades", JSON.stringify(imported));
        alert("Trades imported");
      };
      reader.readAsText(file);
    }
  </script></body>
</html>
