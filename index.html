// Backtest Dashboard App - Updated with Filters, Pie Charts, and Improved Import System

// HTML Structure

<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Backtest Dashboard</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <h1>Backtest Tracker</h1><!-- Trade Entry Form -->
<form id="trade-form">
  <select id="pair">
    <option value="EURUSD">EURUSD</option>
    <option value="EURCAD">EURCAD</option>
    <option value="GBPUSD">GBPUSD</option>
    <option value="US30">US30</option>
    <option value="BTCUSD">BTCUSD</option>
  </select>

  <select id="h4-direction">
    <option value="bullish">Bullish</option>
    <option value="bearish">Bearish</option>
  </select>

  <select id="h1-direction">
    <option value="bullish">Bullish</option>
    <option value="bearish">Bearish</option>
  </select>

  <select id="zone-type">
    <option value="supply">Supply</option>
    <option value="demand">Demand</option>
  </select>

  <input type="datetime-local" id="date-time" required />
  <input type="number" step="0.01" id="entry-price" placeholder="Entry Price" required />
  <input type="number" step="0.01" id="stop-loss" placeholder="Stop Loss" required />
  <input type="number" step="0.01" id="take-profit" placeholder="Take Profit" required />
  <select id="result">
    <option value="win">Win</option>
    <option value="loss">Loss</option>
  </select>

  <textarea id="notes" placeholder="Notes..."></textarea>
  <button type="submit">Save Trade</button>
</form>

<!-- Import & Export -->
<div class="import-export">
  <input type="file" id="import-file" accept=".csv" />
  <button onclick="importCSV()">Import Trade Data</button>
  <button onclick="exportCSV()">Export Trade Data as CSV</button>
</div>

<!-- Filters -->
<div class="filters">
  <label>Filter by Pair:</label>
  <select id="filter-pair" onchange="filterTable()">
    <option value="all">All</option>
    <option value="EURUSD">EURUSD</option>
    <option value="EURCAD">EURCAD</option>
    <option value="GBPUSD">GBPUSD</option>
    <option value="US30">US30</option>
    <option value="BTCUSD">BTCUSD</option>
  </select>
</div>

<!-- Trade Table -->
<table id="trade-table">
  <thead>
    <tr>
      <th>Pair</th>
      <th>H4</th>
      <th>H1</th>
      <th>Zone</th>
      <th>Date</th>
      <th>Entry</th>
      <th>SL</th>
      <th>TP</th>
      <th>SL Size</th>
      <th>RR</th>
      <th>Result</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Charts -->
<div>
  <canvas id="resultChart"></canvas>
</div>

  </div>  <script src="script.js"></script></body>
</html>/* style.css */ body { font-family: Arial, sans-serif; padding: 1rem; background: #f4f4f4; color: #333; }

.container { max-width: 900px; margin: 0 auto; background: white; padding: 1rem; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }

form input, form select, form textarea, form button { display: block; width: 100%; margin-bottom: 10px; padding: 0.5rem; font-size: 1rem; }

.import-export button { margin-top: 10px; margin-right: 5px; }

.filters { margin: 1rem 0; }

canvas { max-width: 100%; height: auto; }

// script.js let trades = JSON.parse(localStorage.getItem("trades")) || []; const form = document.getElementById("trade-form"); const table = document.getElementById("trade-table").getElementsByTagName("tbody")[0]; const resultChart = document.getElementById("resultChart");

function calculateSLSize(entry, sl) { return Math.abs(entry - sl).toFixed(2); }

function calculateRR(entry, sl, tp) { return (Math.abs(tp - entry) / Math.abs(entry - sl)).toFixed(2); }

function saveTradesToStorage() { localStorage.setItem("trades", JSON.stringify(trades)); }

function renderTable(filtered = null) { table.innerHTML = ""; (filtered || trades).forEach((t) => { let row = table.insertRow(); Object.values(t).forEach(val => row.insertCell().textContent = val); }); renderChart(); }

function renderChart() { let wins = trades.filter(t => t.result === "win").length; let losses = trades.filter(t => t.result === "loss").length; const data = { labels: ["Wins", "Losses"], datasets: [{ data: [wins, losses], backgroundColor: ["#4caf50", "#f44336"] }] }; new Chart(resultChart, { type: 'pie', data }); }

form.onsubmit = (e) => { e.preventDefault(); const entry = parseFloat(form.entry-price.value); const sl = parseFloat(form.stop-loss.value); const tp = parseFloat(form.take-profit.value); const trade = { pair: form.pair.value, h4: form["h4-direction"].value, h1: form["h1-direction"].value, zone: form["zone-type"].value, date: form["date-time"].value, entry: entry, sl: sl, tp: tp, slSize: calculateSLSize(entry, sl), rr: calculateRR(entry, sl, tp), result: form.result.value, notes: form.notes.value }; trades.push(trade); saveTradesToStorage(); renderTable(); form.reset(); };

function exportCSV() { const header = Object.keys(trades[0]).join(","); const rows = trades.map(t => Object.values(t).join(",")).join("\n"); const blob = new Blob([header + "\n" + rows], { type: "text/csv" }); const a = document.createElement("a"); a.href = URL.createObjectURL(blob); a.download = "trades.csv"; a.click(); }

function importCSV() { const fileInput = document.getElementById("import-file"); const reader = new FileReader(); reader.onload = function(e) { const lines = e.target.result.split("\n").slice(1); lines.forEach(line => { const [pair, h4, h1, zone, date, entry, sl, tp, slSize, rr, result, notes] = line.split(","); if (pair) trades.push({ pair, h4, h1, zone, date, entry, sl, tp, slSize, rr, result, notes }); }); saveTradesToStorage(); renderTable(); }; reader.readAsText(fileInput.files[0]); }

function filterTable() { const filter = document.getElementById("filter-pair").value; const filtered = filter === "all" ? trades : trades.filter(t => t.pair === filter); renderTable(filtered); }

renderTable();

